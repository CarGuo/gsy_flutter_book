# Flutter å·¥ç¨‹åŒ–æ¡†æ¶é€‰æ‹© â€” æå®šæ•°æ®å­˜å‚¨é€‰å‹

```
æœ¬æ–‡ä¸ºç¨€åœŸæ˜é‡‘æŠ€æœ¯ç¤¾åŒºé¦–å‘ç­¾çº¦æ–‡ç« ï¼Œ14å¤©å†…ç¦æ­¢è½¬è½½ï¼Œ14å¤©åæœªè·æˆæƒç¦æ­¢è½¬è½½ï¼Œä¾µæƒå¿…ç©¶ï¼
```

è¿™æ˜¯ ã€ŠFlutter å·¥ç¨‹åŒ–æ¡†æ¶é€‰æ‹©ã€‹ ç³»åˆ—çš„ç¬¬ä¸‰ç¯‡ ï¼Œå°±åƒä¹‹å‰è¯´çš„ï¼Œè¿™ä¸ªç³»åˆ—åªæ˜¯å•çº¯å‘Šè¯‰ä½ ï¼Œåˆ›å»ºä¸€ä¸ª Flutter å·¥ç¨‹ï¼Œæˆ–è€…è¯´æ­å»ºä¸€ä¸ª Flutter å·¥ç¨‹è„šæ‰‹æ¶ï¼Œåº”è¯¥å¦‚ä½•å¿«é€Ÿé€‰æ‹©é€‚åˆè‡ªå·±çš„åŠŸèƒ½æ¨¡å—ï¼Œå¯ä»¥è¯´è¿™æ˜¯ä¸€ä¸ªæŒ‡å¼•ç³»åˆ—ï¼Œæ‰€ä»¥æ¯”è¾ƒé€‚åˆæ–°æ‰‹åŒå­¦ã€‚

> **Flutter ä¸Šå…³äºæ•°æ®å­˜å‚¨æˆ–è€…æ•°æ®åº“è¯¦ç»†é€‰å‹ä»‹ç»çš„å†…å®¹å¾ˆå°‘ï¼Œä¹Ÿç®—æ˜¯ä¸€ä¸ªè¡¥å…¨å§**ã€‚

æœ¬ç¯‡ä¸»è¦ä»‹ç»æ•°æ®å­˜å‚¨ç›¸å…³ï¼Œå¯èƒ½å°±æœ‰äººä¼šè§‰å¾—ï¼Œæ•°æ®å­˜å‚¨æœ‰ä»€ä¹ˆå¥½è¯´çš„ï¼Ÿä¸å°±æ˜¯å†™ä¸ª Plugin æ¥ä¸ªåŸç”Ÿæ•°æ®åº“å°±å¥½äº†å—ï¼Ÿè¿™éƒ½èƒ½æ°´ï¼Ÿ

ç¡®å®ï¼Œæœ€ç®€å•å¿«æ·çš„æ–¹æ³•å°±æ˜¯å†™ä¸ª Plugin ï¼Œé€šè¿‡ Dart ç›´æ¥è°ƒç”¨åŸç”Ÿå¹³å°çš„æ•°æ®å­˜å‚¨èƒ½åŠ›ï¼Œè¿™æ ·å®ç°æˆæœ¬æœ€ä½ï¼Œä½†æ˜¯å¯¹äº Flutter æ¥è¯´å¯èƒ½ä¸å¤Ÿä¼˜é›…ï¼š

- é€šè¿‡ `MethodCallHandler`  è°ƒç”¨çš„æ–¹å¼ï¼Œä¸­é—´è¿‡ç¨‹å­˜åœ¨ä¸€å®šç¨‹åº¦çš„æ€§èƒ½æ¶ˆè€—ï¼Œç‰¹åˆ«æ˜¯è¯»å†™æ•°æ®é‡æ¯”è¾ƒå¤§çš„æ—¶å€™
-  Flutter éœ€è¦å¤šå¹³å°æ”¯æŒï¼Œé€šè¿‡  `MethodCallHandler`  è°ƒç”¨åŸç”Ÿå¹³å°ï¼Œå°±éœ€è¦åœ¨æ¯ä¸ªå¹³å°çš„ä½¿ç”¨ä¸åŒçš„ä»£ç å’Œé€‚é…é€»è¾‘ï¼Œä¼šæé«˜ç»´æŠ¤æˆæœ¬

**æ‰€ä»¥é’ˆå¯¹ Flutter å¹³å°ï¼Œç°åœ¨ç¤¾åŒºçš„æ•°æ®å­˜å‚¨å·¥å…·å®ç°éƒ½é»˜å¥‘çš„é‡‡ç”¨äº†å¦å¤–ä¸€ç§æ–¹å¼**ï¼Œå½“ç„¶ä¸æ˜¯è¯´ä½¿ç”¨  `MethodCallHandler`  çš„ Plugin å®ç°ä¸è¡Œï¼Œå…·ä½“é€‰å‹è¿˜æ˜¯éœ€è¦çœ‹ä½ æ‰€éœ€è¦çš„åœºæ™¯ã€‚

> Let's go ğŸ’— ï½

# Plugin è°ƒç”¨åŸç”Ÿå¹³å°å®ç°

é¦–å…ˆç®€å•ä»‹ç»ä¸€ä¸‹å¤§å®¶æ¯”è¾ƒç†Ÿæ‚‰çš„ä¸¤ä¸ªæ•°æ®å­˜å‚¨çš„åº“ï¼Œå®ƒä»¬éƒ½æ˜¯é€šè¿‡ Plugin ç›´æ¥è°ƒç”¨åŸç”Ÿå¹³å° API è¿›è¡Œæ•°æ®å­˜å‚¨ï¼š

- **[shared_preferences](https://github.com/flutter/plugins/tree/main/packages/shared_preferences)   key-value çš„ç®€å•æ•°æ®å­˜å‚¨**ï¼Œç›¸ä¿¡ Android å¼€å‘å¯¹è¿™ä¸ªåç§°ä¼šå¾ˆäº²åˆ‡ï¼Œå®˜æ–¹ç»´æŠ¤ï¼Œå®ç°ç®€å•ï¼Œæ”¯æŒå…¨å¹³å°ï¼Œé€‚åˆå¯¹æ€§èƒ½è¦æ±‚ä¸é«˜å’Œæ•°æ®é‡ä¸å¤§çš„åœºæ™¯

![](http://img.cdn.guoshuyu.cn/20220928_Z5/image1.png)

> ä¸è¿‡ä¹Ÿæ˜¯å› ä¸º `MethodCallHandler`  è°ƒç”¨çš„æ–¹å¼ï¼Œä»ç»´æŠ¤å’Œè°ƒç”¨è·¯å¾„ä¸Šä¼šæ˜¾å¾—æ¯”è¾ƒå¤æ‚ï¼Œ**federated plugin çš„å†™æ³•å’Œç‰ˆæœ¬ç®¡ç†æ–¹å¼å®¹æ˜“å‡ºç°é—®é¢˜**ï¼Œå·²ç»ä¸æ­¢ä¸€æ¬¡åœ¨ä½¿ç”¨å®˜æ–¹çš„ federated plugin  å› ä¸ºå†…éƒ¨ç‰ˆæœ¬é—®é¢˜è¸©å‘ã€‚

- [sqflite](https://github.com/tekartik/sqflite/tree/master/sqflite) å¯ä»¥è¯´æ˜¯æœ€æ—©çš„ç¬¬ä¸‰æ–¹ Flutter æ•°æ®åº“ä¹‹ä¸€ï¼Œæ”¯æŒ iOSã€ Android å’Œ MacOS ï¼Œä¸ºä»€ä¹ˆä¸æ”¯æŒå…¨å¹³å°ï¼Œ**è¿™å…¶å®ä¹Ÿæ˜¯ Plugin ç›´æ¥è°ƒç”¨å¤šå¹³å°çš„é—®é¢˜ä¹‹ä¸€ï¼Œä½ éœ€è¦é‡å¤åœ¨æ¯ä¸ªå¹³å°ä¸Šå®ç°åŒä¸€ä¸ªé€»è¾‘ï¼Œè™½ç„¶åˆæœŸå¼€å‘æˆæœ¬ä½ï¼Œä½†æ˜¯åç»­ç»´æŠ¤æˆæœ¬å¹¶ä¸ä½**ï¼ŒåŒæ—¶  [sqflite](https://github.com/tekartik/sqflite/tree/master/sqflite)  æä¾›çš„èƒ½åŠ›ä¹Ÿæ¯”è¾ƒå¼±ï¼Œå°è£…ç¨‹åº¦ä¸é«˜ï¼Œä¸»è¦è¿˜æ˜¯è§£å†³äº†æ—©æœŸå¯¹æ•°æ®åº“è¿«åˆ‡æ”¯æŒçš„éœ€æ±‚ã€‚

**æ—¢ç„¶è¯´åˆ° [sqflite](https://github.com/tekartik/sqflite/tree/master/sqflite)  ï¼Œè¿™é‡Œæ¨èä¸€ä¸ª [flutter-sqlite-viewer](https://github.com/frgmt/flutter-sqlite-viewer) çš„ç¬¬ä¸‰æ–¹å·¥å…·**ï¼Œç›¸ä¿¡å¤§å®¶åœ¨æ“ä½œæ•°æ®çš„æ—¶å€™éƒ½æœ‰å¯è§†åŒ–æŸ¥çœ‹çš„éœ€æ±‚ï¼Œè™½ç„¶å¼€å‘è¿‡ç¨‹ä¸­å¯ä»¥å¦‚ä¸‹å·¦å›¾ä¸€æ ·åœ¨ Android Studio é‡Œé€šè¿‡ App Inspection æŸ¥çœ‹ï¼Œä½†æ˜¯æœ‰ä¸€äº›åœºæ™¯ä½ æ²¡åŠæ³•æä¾›ç›´è¿ Debug è°ƒè¯•ï¼Œè¿™æ—¶å€™  flutter-sqlite-viewer å°±å¯ä»¥å¾ˆæ–¹ä¾¿æä¾›æœ¬åœ°åŒ–æ•°æ®åº“æŸ¥çœ‹çš„èƒ½åŠ›ã€‚

| ![](http://img.cdn.guoshuyu.cn/20220928_Z5/image2.png) | ![](http://img.cdn.guoshuyu.cn/20220928_Z5/image3.gif) |
| ----------------------------------------------------------- | -------------------------------------- |



#  sqlite3 

ä»è¿™é‡Œå¼€å§‹æˆ‘ä»¬ä»‹ç»ä¸å¤§ä¸€æ ·çš„ï¼Œ[sqlite3](https://github.com/simolus3/sqlite3.dart/tree/master/sqlite3) é‡‡ç”¨çš„æ˜¯  `dart:ffi` å®ç°ç›´æ¥é€šè¿‡ Dart è®¿é—®æ•°æ®åº“çš„èƒ½åŠ›ï¼Œé‚£è¿™é‡Œçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ

- dart å’Œ c/c++ çš„ç›¸å…³ä»£ç å¯ä»¥è·¨å¹³å°ï¼Œä¸éœ€è¦ç»´æŠ¤å¤šä»½åŒæ ·çš„å¹³å°é€»è¾‘ï¼ˆè™½ç„¶éœ€è¦ç»´æŠ¤å¤šä»½ç¼–è¯‘äº§ç‰©ï¼‰
- dart å’Œæ•°æ®åº“ç›´æ¥äº¤äº’ï¼Œçœå»ä¸­é—´è¿‡ç¨‹çš„è½¬æ¢éœ€è¦
- **æœ‰é—®é¢˜äº†ä½ ä¸å¥½è°ƒè¯•**

> å…¶å®ä»  Flutter  2.0 å’Œ Dart 2.12 æä¾› FFI æ”¯æŒå¼€å§‹ï¼Œåˆ°ç°åœ¨çš„ Dart 3.0 æ­£å¼ç‰ˆå‘å¸ƒï¼Œå®˜æ–¹ä¸€ç›´éƒ½åœ¨å®Œå–„ ffi è¿˜æœ‰å’Œå¹³å°è¯­è¨€ç›´æ¥äº¤äº’çš„èƒ½åŠ›ï¼Œä¾‹å¦‚åœ¨ [Dart 2.18 é‡Œ  Dart å°±æ”¯æŒä¸ Objective-C å’Œ Swift ç›´æ¥äº¤äº’](https://juejin.cn/post/7137874832988831751)ã€‚

ç›®å‰ sqlite3 æ”¯æŒ Androidã€iOSã€Linuxã€MacOSã€Window å¹³å°ï¼Œå¹¶ä¸”åœ¨ç‰¹å®šå¹³å°è¿˜æä¾›äº†åˆ‡æ¢åˆ° [SQLCipher](https://www.zetetic.net/sqlcipher/) çš„æ”¯æŒï¼š

- Android å¹³å°å¯ä»¥**ä¾èµ– `sqlite3_flutter_libs` æ¥é›†æˆæœ€æ–°çš„ sqlite3 ç‰ˆæœ¬ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä¾èµ– `sqlcipher_flutter_libs` æ¥åˆ‡æ¢åˆ°  SQLCipher**
- iOS å¹³å°å’Œ macOS å¹³å°ä¸ Android ç±»ä¼¼
- Windows å’Œ Linux å¹³å°å¯ä»¥ä¾èµ– `sqlite3_flutter_libs` æ¥é›†æˆæœ€æ–°çš„ sqlite3 ç‰ˆæœ¬
- Web å¹³å°å…¶å®ä¹Ÿæ”¯æŒï¼Œåªæ˜¯åªæ”¯æŒåœ¨ WASM æ¨¡å¼ä¸‹ï¼Œä¹Ÿå°±æ˜¯ `--web-renderer canvaskit ` çš„æ—¶å€™ä½¿ç”¨ï¼ŒåŒæ—¶è¿˜éœ€è¦ä¸€äº›é¢å¤–çš„æ“ä½œï¼Œä¾‹å¦‚æŠŠ  `sqlite3.wasm` æ”¾åˆ°  `web/`  ç›®å½•ä¸‹

> **å½“ç„¶å…¶å®  sqlite3 ä¸åªæ˜¯æ”¯æŒ Flutter ï¼Œå®ƒçš„ ffi ä¹Ÿæ˜¯ Dart çš„èƒ½åŠ›ï¼Œæ‰€ä»¥å®ƒä¹Ÿå¯ä»¥ç›´æ¥ç”¨åœ¨ dart server ä¸Š**ã€‚

æ‰€ä»¥åœ¨ sqlite3 é‡Œ Dart å°±æ˜¯é€šè¿‡  `dart:ffi`  ç›´æ¥å’Œæ•°æ®åº“äº¤äº’ï¼Œè€Œ Plugin é‡Œçš„å†…å®¹æ›´å¤šåªæ˜¯ä¸€ä¸ªåˆå§‹åŒ–çš„ä½œç”¨ï¼Œä¾‹å¦‚ `sqlcipher_flutter_libs`  çš„ Plugin å°±æ˜¯åŠ è½½å¯¹åº”çš„ `sqlcipher.so` ã€‚

![](http://img.cdn.guoshuyu.cn/20220928_Z5/image4.png)



# Drift

**å¯èƒ½æ˜¯ç›´æ¥ä½¿ç”¨ sqlite3 è¿˜ä¸å¤Ÿä¼˜é›…ï¼Œæ‰€ä»¥ä½œè€…é’ˆå¯¹ sqlite3 åˆå°è£…äº†ä¸€å¥— [Drift](https://github.com/simolus3/drift)** ï¼ŒDrift åŒæ ·å¯ä»¥è„±ç¦» Flutter è¿è¡Œï¼Œå› ä¸ºå®ƒåº•å±‚ sqlite3 ä¾ç„¶åŸºäº  `dart:ffi`  ï¼Œæ”¯æŒ Androidã€iOSã€macOSã€Linux ã€ Windows å’Œ web ï¼Œ **ä¸åŒä¹‹å¤„æ˜¯å®ƒå¯¹äº‹åŠ¡ã€ migrationsã€å¤æ‚è¿‡æ»¤ã€è¡¨è¾¾å¼ã€æ‰¹é‡æ›´æ–°å’Œ joins ç­‰æ“ä½œåšäº†å°è£…**ï¼Œä¾‹å¦‚ï¼š

- æ ¹æ®æ³¨è§£ç”Ÿæˆæ˜ å°„ä»£ç 
- å¯¹æŸ¥è¯¢ç»“æœæ ¹æ® Stream å®ç°è‡ªåŠ¨æ›´æ–°
- æ›´æ–¹ä¾¿çš„ç®¡ç†  schema migrations å’Œ  `CREATE TABLE` 

ä¾‹å¦‚ä½ å¯ä»¥é€šè¿‡å¦‚ä¸‹æ‰€ç¤ºè¿›è¡ŒèšåˆæŸ¥è¯¢ï¼Œå°†å¤šä¸ªæ•°æ®ç»“æœåˆå¹¶åˆ°ä¸€èµ·ï¼š

```dart
Future<void> countTodosInCategories() async {
  final amountOfTodos = todos.id.count();

  final query = select(categories).join([
    innerJoin(
      todos,
      todos.category.equalsExp(categories.id),
      useColumns: false,
    )
  ]);
  query
    ..addColumns([amountOfTodos])
    ..groupBy([categories.id]);

  final result = await query.get();

  for (final row in result) {
    print('there are ${row.read(amountOfTodos)} entries in'
        '${row.readTable(categories)}');
  }
}

Stream<double> averageItemLength() {
  final avgLength = todos.content.length.avg();
  final query = selectOnly(todos)..addColumns([avgLength]);
  return query.map((row) => row.read(avgLength)!).watchSingle();
}

```

å½“ç„¶ï¼Œè¿™å¹¶ä¸æ˜¯æœ€æœ‰è¶£çš„ï¼Œ**Drift é‡Œæœ€æœ‰æ„æ€çš„æ˜¯æä¾›äº† sql è§£æå™¨å’Œåˆ†æå™¨**ï¼Œæ‰€ä»¥ä½ å¯ä»¥é€šè¿‡ sql è¯­å¥æ¥ç”Ÿæˆ APIï¼Œå¹¶ä¸”è¿˜ä¼šåœ¨æ„å»ºæ—¶æä¾›é”™è¯¯è­¦å‘Šã€‚

| ![](http://img.cdn.guoshuyu.cn/20220928_Z5/image5.png) | ![](http://img.cdn.guoshuyu.cn/20220928_Z5/image6.png) |
| ----------------------------------------------------------- | ----------------------------------------------------------- |

è¿™é‡Œé¡ºä¾¿æä¸€å˜´ï¼Œ**åœ¨ Flutter é‡Œé€šè¿‡çŠ¶æ€ç®¡ç†å·¥å…·å¾€ä¸‹ä¼ é€’ `database`  å¤§å®¶åº”è¯¥ä¸é™Œç”Ÿå§**ï¼Œ drift å®˜æ–¹åŒæ ·å»ºè®®ä½¿ç”¨  `provider` æˆ–è€… `riverpod` å¾€ä¸‹ä¼ é€’ `database` å¯¹è±¡ï¼Œä¾‹å¦‚ï¼š

```dart
void main() {
  runApp(
    Provider<MyDatabase>(
      create: (context) => MyDatabase(),
      child: MyFlutterApp(),
      dispose: (context, db) => db.close(),
   ),
  );
}
```

åŒæ—¶ï¼Œé’ˆå¯¹ sqliteï¼Œä½œè€…è¿˜æä¾›äº†ç›¸å…³çš„é€‰æ‹©å»ºè®®ï¼š

- å¦‚æœä½ ä¸æ€•éº»çƒ¦ï¼Œæƒ³æ›´è½»é‡çº§ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥ä½¿ç”¨ [sqlite3](https://github.com/simolus3/sqlite3.dart/tree/master/sqlite3) 
- å¦‚æœä½ åªéœ€è¦ Stream å®ç°è‡ªåŠ¨æ›´æ–°ï¼Œä¸éœ€è¦è‡ªåŠ¨ç”Ÿæˆ dart æŸ¥è¯¢æ˜ å°„ï¼Œé‚£å¯ä»¥é€‰æ‹© [sqlcool]([Homepage](https://github.com/synw/sqlcool))
- å¦‚æœä½ éœ€è¦å’Œ Drift åŠŸèƒ½ç±»ä¼¼ï¼Œä½†æ˜¯éœ€è¦æ›´çµæ´»çš„è‡ªå®šä¹‰èƒ½åŠ›ä¸”ä¸ä»‹æ„éº»çƒ¦çš„è¯ï¼Œå¯ä»¥é€‰æ‹© [floor](https://github.com/vitusortner/floor) 

æœ€åï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä½ è¿˜å¯ä»¥ç”¨  [db_viewer ](https://github.com/vanlooverenkoen/db_viewer) æ¥é¢„è§ˆæ•°æ®åº“å†…å®¹æ•°æ®ã€‚

![](http://img.cdn.guoshuyu.cn/20220928_Z5/image7.gif)





# Realm

å¯èƒ½ä¸å°‘äººå¯¹ [realm](https://github.com/realm/realm-dart) è¿˜å¹¶ä¸äº†è§£ï¼Œç¬¬ä¸€æ¬¡æ¥è§¦ realm æ˜¯åœ¨ 2016 å¹´å¼€å‘ React Native  çš„æ—¶å€™ï¼Œé‚£æ—¶å€™ realm  å‡ ä¹å°±æ˜¯æˆ‘é¦–é€‰çš„æ•°æ®åº“ï¼Œå®ƒä½œä¸º SQLite çš„æ›¿ä»£ï¼Œé‡‡ç”¨çš„æ˜¯ MongoDB çš„æ•°æ®åº“æ–¹æ¡ˆã€‚

![](http://img.cdn.guoshuyu.cn/20220928_Z5/image8.png)

å¦‚ä»Š realm ä¹Ÿå¼€å§‹æ”¯æŒ  Flutter  ï¼Œè™½ç„¶è¿˜åœ¨ Betaï¼ˆå·²ç» Beta æŒºä¹…äº†ï¼‰ï¼Œä½†æ˜¯å®ƒåŒæ ·é‡‡ç”¨äº†åŸºäº   `dart:ffi`   çš„å®ç°ï¼Œæ‰€ä»¥  realm åŒæ ·æ”¯æŒè„±ç¦» Flutter çº¯ Dart è¿è¡Œï¼Œå¹¶ä¸”æ”¯æŒ Androidã€iOS ã€Linuxã€MacOS ã€Windows ç­‰å¹³å°è¿è¡Œã€‚

> å…³äº MongoDB å’Œ SQL çš„å·®å¼‚å¯¹æ¯”è¿™é‡Œå°±ä¸è¯´ï¼Œä¸»è¦å°±æ˜¯å…³ç³»å‹æ•°æ®åº“ä¸éå…³ç³»å‹æ•°æ®åº“çš„åŒºåˆ«

é‚£ realm æœ€å¤§çš„ç‰¹åˆ«ä¹‹å¤„æ˜¯ä»€ä¹ˆï¼Ÿ**é‚£å°±æ˜¯å®ƒé™¤äº†æä¾›æœ¬åœ°æ•°æ®åº“èƒ½åŠ›ä¹‹å¤–ï¼Œå®ƒè¿˜æä¾›æ•°æ®åŒæ­¥å’Œåç«¯å­˜å‚¨èƒ½åŠ›**ã€‚

ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ realm çš„æ•°æ®åº“æ”¯æŒå®æ—¶åŒæ­¥ï¼Œåœ¨æ­¤ä¹‹å‰æˆ‘è®¾è®¡çš„  React Native  é¡¹ç›®é‡Œï¼Œå°±æœ‰åŸºäº realm å¾ˆå¿«å°±å¼€å‘å‡ºä¸€å¥—æ”¯æŒæ•°æ®å¤‡ä»½å’ŒåŒæ­¥çš„èŠå¤©åº”ç”¨çš„åœºæ™¯ã€‚

![](http://img.cdn.guoshuyu.cn/20220928_Z5/image9.png)

ç®€å•ä»‹ç»ä¸€ä¸‹ï¼Œå°±æ˜¯åœ¨ realm çš„åå°æœåŠ¡ä¸Šï¼Œä¸»è¦éœ€è¦é€šè¿‡å®šä¹‰ Schema Table å’Œ sync æƒé™ï¼Œå°±å¯ä»¥é€šè¿‡ realm SDK åœ¨å¯åŠ¨æ—¶åŒæ­¥æ•°æ®ï¼Œå¹¶å¯¹æ•°æ®è¿›è¡Œå®æ—¶åŒæ­¥ï¼Œè€Œåœ¨ realm ä¸Šï¼Œä½ å¯ä»¥é€šè¿‡ `Credentials` å’Œ  `User` æ¥å®šä¹‰è§’è‰²çš„è¯»å†™æƒé™å’Œç®¡ç†æ•°æ®ã€‚

| ![](http://img.cdn.guoshuyu.cn/20220928_Z5/image10.png) | ![](http://img.cdn.guoshuyu.cn/20220928_Z5/image11.png) |
| ----------------------------------------------------------- | ----------------------------------------------------------- |

å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¼€å¯ sync ä¹‹åï¼Œåœ¨ iPhone æ¨¡æ‹Ÿå™¨ä¸Šç‚¹å‡»æ·»åŠ çš„ä»»åŠ¡ï¼Œåœ¨ Android æ¨¡æ‹Ÿå™¨ä¸Šå°±ä¼šå®æ—¶åŒæ­¥ iPhone ä¸Šå¯¹æ•°æ®åº“çš„æ“ä½œæ›´æ”¹ï¼Œå¹¶ä¸” realm çš„ sync åå°é»˜è®¤å°±æ”¯æŒé›†ç¾¤æœåŠ¡ï¼Œå¦‚æœç”¨æˆ·é‡ä¸æ˜¯ç‰¹åˆ«å¤§çš„æƒ…å†µä¸‹ï¼Œæ‹¿æ¥åšèŠå¤©æˆ–è€…å®¢æœåœºæ™¯è¿˜æ˜¯å¾ˆå¯è¡Œçš„ã€‚

![](http://img.cdn.guoshuyu.cn/20220928_Z5/image12.gif)



>  [realm-dart-samples ](https://github.com/realm/realm-dart-samples)é‡ŒåŒæ ·æä¾›äº†å¯¹åº”çš„ä¾‹å­ï¼Œä½†æ˜¯å®ƒçš„ä¾‹å­æœ‰é—®é¢˜ï¼Œæ‰€ä»¥ä½ éœ€è¦è‡ªå·±æ³¨å†Œ realm.io ä¸Šçš„æœåŠ¡ï¼Œå¹¶ä¸”è·å–åˆ° appId åï¼Œæ›¿æ¢ appId å¹¶åœ¨ realm åå°åˆ›å»ºè‡ªå·±çš„ Task è¡¨ï¼Œå¼€å¯ sync æœåŠ¡ã€‚

åŒæ—¶ realm ä¹Ÿæä¾› [realm-studio](https://github.com/realm/realm-studio) æ”¯æŒæ•°æ®åº“å¯è§†åŒ–çš„èƒ½åŠ›ï¼Œå½“ç„¶ï¼Œå¦‚æœä½ ä½¿ç”¨äº† realm çš„æ•°æ®åŒæ­¥æœåŠ¡ï¼Œé‚£ä¹ˆåœ¨ Atlas  ä¸Šä¹Ÿå¯ä»¥å®æ—¶çœ‹åˆ°å¯¹åº”çš„æ•°æ®æ›´æ–°ã€‚

| ![](http://img.cdn.guoshuyu.cn/20220928_Z5/image13.png) | ![](http://img.cdn.guoshuyu.cn/20220928_Z5/image14.png) |
| ------------------------------------------------ | ----------------------------------------------------------- |

ä¸è¿‡è¿˜æ˜¯é‚£å¥è¯ï¼Œç›®å‰ realm è¿˜åœ¨ beta ï¼Œä¾‹å¦‚ï¼š

- å¾ˆå¤š API ä¸Šå¯ä»¥çœ‹åˆ°æ–‡æ¡£ç´§ç¼º
- ä¸æ”¯æŒ reload ï¼Œsync æ¨¡å¼ä¸‹ä¸€ reload å°±crash 

| ![](http://img.cdn.guoshuyu.cn/20220928_Z5/image15.png) | ![](http://img.cdn.guoshuyu.cn/20220928_Z5/image16.png) |
| ----------------------------------------------------------- | ----------------------------------------------------------- |

å¦å¤–ï¼Œæ¯”å¦‚æˆ‘ä¸è¯´ï¼Œä½ ç¿»é˜…æ–‡æ¡£ä¹Ÿå¾ˆéš¾æ‰¾åˆ° Flutter ä¸Šå¦‚ä½•ç›‘å¬å’ŒåŒæ­¥æŸ¥è¯¢ç»“æœå˜åŒ–ï¼Œè€Œå…¶å®è¿™éƒ¨åˆ†ä»£ç å…¶å®ä½ åªéœ€è¦é€šè¿‡ `stream` å°±å¯ä»¥æ¥å…¥å®ç°ã€‚

```dart
StreamBuilder<RealmResultsChanges<Task>>(
    stream: MyApp.allTasksRealm.all<Task>().changes,
    builder: (c, s) {
      return Text((s.data != null) ? s.data!.results.length.toString() : "null",
          style: Theme.of(context).textTheme.headline4);
    })
```

æ‰€ä»¥ç›®å‰åœ¨ Flutter ä¸Šï¼Œå¦‚æœåœ¨å…¶ä»–å¹³å°ä¹‹å‰ç”¨è¿‡ realm ï¼Œé‚£å¯ä»¥è¯•è¯•ï¼›ä½†æ˜¯å¦‚æœæ²¡æœ‰ï¼Œå»ºè®®å…ˆä¸èººå‘ï¼Œç­‰æ­£å¼ç‰ˆå§ã€‚

> å…¶å®å’Œ  Realm  ä¸€æ ·å…·æœ‰å®æ—¶åŒæ­¥èƒ½åŠ›ï¼ŒåŒæ ·æ˜¯åŸºäºæ–‡ä»¶çš„éå…³ç³»æ•°æ®åº“ï¼Œå¹¶ä¸”æ›´ç¨³å®šæ›´å¯é çš„æ•°æ®åº“æ˜¯ [firebase_database](https://github.com/firebase/flutterfire/tree/master/packages/firebase_database/firebase_database) ï¼Œä¸è¿‡å‘¨æ‰€å‘¨çŸ¥çš„æ¬¢è¿ï¼Œå›½å†…åŸºæœ¬ä¸ä¼šé€‰æ‹©å®ƒã€‚

# ObjectBox

 [ObjectBox ](https://github.com/objectbox/objectbox-dart) å…¶å®å’Œ Realm ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ NoSQL ç±»å‹çš„æ•°æ®åº“ï¼ŒåŒæ ·æ˜¯åŸºäº `dart:ffi`  ï¼Œæ”¯æŒ Android ã€iOS ã€Linux ã€MacOS å’Œ Windowï¼Œ**å·ç§°åœ¨èƒ½è€—å’Œé€Ÿåº¦ä¸Šæœ‰ç»å¯¹çš„ä¼˜åŠ¿ï¼ŒåŒæ—¶å› ä¸ºæ˜¯çº¯ Dart APIï¼Œæ‰€ä»¥å®ƒå®Œå…¨ä¸éœ€è¦ä½ ç†Ÿæ‚‰æˆ–è€…å­¦ä¹  SQL è¯­æ³•** ã€‚

```dart
@Entity()
class Person {
  int id;

  String firstName;
  String lastName;

  Person({this.id = 0, required this.firstName, required this.lastName});
}

final store = await openStore(); 
final box = store.box<Person>();

var person = Person(firstName: 'Joe', lastName: 'Green');

final id = box.put(person);  // Create

person = box.get(id)!;       // Read

person.lastName = "Black";
box.put(person);             // Update

box.remove(person.id);       // Delete

// find all people whose name start with letter 'J'
final query = box.query(Person_.firstName.startsWith('J')).build();
final people = query.find();  // find() returns List<Person>
```

> ç›®å‰ objectbox æ”¯æŒ dart ã€javaã€kotlin ã€swift  ç”šè‡³è¿˜æ”¯æŒ GO å’Œ Python

åœ¨ä½¿ç”¨ä½“éªŒä¸Šï¼ŒObjectBox å¯èƒ½ä¼šæ›´è´´è¿‘ NoSQL çš„æ“ä½œä¹ æƒ¯ï¼Œ å¦å¤–å®ƒä¹Ÿå¯ä»¥ç›´æ¥åœ¨æœåŠ¡ç«¯è¢«ä½¿ç”¨ï¼Œä»å®˜æ–¹æä¾›çš„åŸºå‡†æµ‹è¯•ä¸­çœ‹ï¼ŒObjectBox çš„æ•´ä½“æ€§èƒ½ç¡®å®å¾ˆä¼˜ç§€ï¼ˆå…¶ä¸­çš„ Hive åé¢ä»‹ç»ï¼‰ã€‚

![](http://img.cdn.guoshuyu.cn/20220928_Z5/image17.png)

> å¯¹æµ‹è¯•æ„Ÿå…´è¶£çš„å¯ä»¥çœ‹ [objectbox-dart-performance](https://github.com/objectbox/objectbox-dart-performance) ï¼Œä¸è¦é—®æˆ‘å®ƒæ˜¯ä¸æ˜¯çœŸçš„è¿™ä¹ˆå¥½ç”¨ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ²¡åœ¨ç”Ÿäº§é¡¹ç›®ä¸Šä½¿ç”¨å®ƒã€‚

ObjectBox å¦å¤–ä¸€ä¸ªç‰¹ç‚¹å°±æ˜¯æ”¯æŒç¦»çº¿æ•°æ®åŒæ­¥ï¼š[ObjectBox Sync](https://objectbox.io/sync/)  ï¼Œå’Œ realm è¿˜æœ‰ firebase ç±»ä¼¼ï¼Œè¿™å…¶å®å·²ç»æˆä¸º NoSQL æœåŠ¡å•†éƒ½ä¼šæä¾›çš„ç‰¹è‰²ä¹‹ä¸€ã€‚

![](http://img.cdn.guoshuyu.cn/20220928_Z5/image18.png)

ObjectBox Sync ç¦»çº¿åŒæ­¥çš„æ”¯æŒä¸»è¦åœ¨ï¼š**å½“è®¾å¤‡ç¦»çº¿æ—¶æ•°æ®æ“ä½œä¼šè¢«ä¿å­˜åœ¨æœ¬åœ°ï¼Œå½“è®¾å¤‡è¿æ¥ä¸Šç½‘ç»œæ—¶ï¼Œæ•°æ®ä¼šæ¢å¤åŒæ­¥**ã€‚

![](http://img.cdn.guoshuyu.cn/20220928_Z5/image19.png)

> æŠ›å¼€ sync èƒ½åŠ›ä¸è°ˆï¼ŒObjectBox ä½œä¸ºæœ¬åœ°æ•°æ®åº“åœ¨æ€§èƒ½å’Œå¼€å‘ä½“éªŒä¸ŠçœŸçš„å¾ˆä¸é”™ã€‚

# Hive

å‰é¢ä»‹ç»çš„éƒ½æ˜¯æ¯”è¾ƒé‡çš„æ•°æ®åº“ç±»å‹ï¼Œé‚£æ¥ä¸‹æ¥ä»‹ç»ä¸ªè½»é‡å‹çš„å­˜å‚¨æ¡†æ¶ï¼š [Hive ](https://github.com/hivedb/hive/tree/master/hive)ã€‚

**Hive æ˜¯ä¸€ä¸ªçº¯ Dart å®ç°çš„è½»é‡ key-value æ•°æ®åº“ï¼Œä¸»è¦é€šè¿‡ dart/io å¯¹æ–‡ä»¶è¿›è¡Œè¯»å†™**ï¼Œæ”¯æŒ Android ã€iOSã€Linuxã€MacOSã€Windowã€Web å¹³å°ã€‚

ä½œä¸º  key-value  æ•°æ®åº“ï¼Œå®ƒå…¶å®å¾ˆé€‚åˆç”¨æ¥æ›¿ä»£ shared_preferences ï¼Œå¹¶ä¸”å®ƒæ”¯æŒä½¿ç”¨ AES  è¿›è¡ŒåŠ å¯†ï¼Œç›®å‰å®˜æ–¹æä¾›çš„åŸºå‡†æµ‹è¯•æ•°æ®ä¸Šæ€§èƒ½è¡¨ç°è¿˜ä¸é”™ï¼ˆè™½ç„¶æ•°æ®ä¸€å¤§å¯èƒ½å°±æ‹‰èƒ¯ï¼‰ã€‚

![](http://img.cdn.guoshuyu.cn/20220928_Z5/image20.png)

Hive çš„ä½¿ç”¨ä»‹ç»è¿™é‡Œå°±ä¸èµ˜è¿°äº†ï¼Œå› ä¸ºçœŸçš„å¾ˆç®€å•ç›´æ¥ï¼Œåœ¨ Hive é‡Œï¼š

- Box å°±ç±»ä¼¼ SQL é‡Œçš„è¡¨

- Object å°±ç±»ä¼¼äºæ•°æ®åº“ä¸­çš„å®ä½“å¯¹è±¡

- Adapter å¯ä»¥ç”¨æ¥åšè‡ªå®šä¹‰å¯¹è±¡çš„é€‚é…å™¨ï¼Œå¯ä»¥ç”¨äºå®ç°ä¸€äº›`read` / `write` æ“ä½œ

```dart
import 'package:hive/hive.dart';

void main() async {
  Hive.registerAdapter(PersonAdapter());
  var persons = await Hive.openBox('persons');

  var person = Person()
    ..name = 'Lisa';

  persons.add(person); // Store this object for the first time

  print('Number of persons: ${persons.length}');
  print("Lisa's first key: ${person.key}");

  person.name = 'Lucas';
  person.save(); // Update object

  person.delete(); // Remove object from Hive
  print('Number of persons: ${persons.length}');

  persons.put('someKey', person);
  print("Lisa's second key: ${person.key}");
}

@HiveType()
class Person extends HiveObject {
  @HiveField(0)
  String name;
}

class PersonAdapter extends TypeAdapter<Person> {
  @override
  final typeId = 0;

  @override
  Person read(BinaryReader reader) {
    return Person()..name = reader.read();
  }

  @override
  void write(BinaryWriter writer, Person obj) {
    writer.write(obj.name);
  }
}
```

**å¦å¤– Hive ä¹Ÿæ”¯æŒå¦‚ `Hive.openLazyBox`  è¿›è¡Œæ‡’åŠ è½½å’Œ `compactionStrategy` å‹ç¼©æ•°æ®æ¥é’ˆå¯¹å¤§æ•°æ®é‡è¿›è¡Œä¼˜åŒ–**ï¼Œä½†æ˜¯æ­£å¦‚ä½œè€…åœ¨ [#782 ](https://github.com/hivedb/hive/issues/782) ä»‹ç»çš„ï¼Œå½“æ•°æ®è¶…è¿‡ä¸€å®šæ•°é‡æ—¶ï¼Œæ¯”å¦‚ 50,000 ï¼Œé‚£ä»æ€§èƒ½ä¸Šè¿˜æ˜¯ä½¿ç”¨ SQLite æ›´å¥½ã€‚

![](http://img.cdn.guoshuyu.cn/20220928_Z5/image21.png)

å½“ç„¶ï¼Œåœ¨ [#170](https://github.com/hivedb/hive/issues/170#issuecomment-573874355) é‡Œæœ‰é€šè¿‡å¯¹ `isolate` æä¾›å…±äº«å†…å­˜çš„æ”¯æŒæ¥ä¼˜åŒ– Hive ï¼Œä½†æ˜¯å¾ˆæ˜æ˜¾è¿™æ¡è·¯æ˜¯èµ°ä¸é€šçš„ã€‚

![](http://img.cdn.guoshuyu.cn/20220928_Z5/image22.png)

å¦å¤–ç›®å‰é’ˆå¯¹  **Hive  å¥½åƒæ²¡æœ‰æ¯”è¾ƒåˆé€‚çš„å¯è§†åŒ–å·¥å…·ï¼Œè¿™ä¹Ÿè®¸ä¼šå½±å“éƒ¨åˆ†äººåœ¨é€‰å‹ä¸Šçš„è€ƒé‡**ï¼Œä¸è¿‡ [hivedb](https://docs.hivedb.dev/#/more/vscode-snippets) åœ¨ VSCode ä¸Šæä¾›äº†æ¨¡ç‰ˆä»£ç ç‰‡æ®µçš„æ”¯æŒï¼Œä¹Ÿç®—æ˜¯å…·å¤‡å¦å¤–ä¸€ç§â€œå¾®å¼±â€çš„ä¼˜åŠ¿ã€‚

![](http://img.cdn.guoshuyu.cn/20220928_Z5/image23.gif)

> PSï¼šå…¶å®ä½ å¯ä»¥æ‹¿ hivedb å½“ç®€å•çŠ¶æ€ç®¡ç†ç”¨ï¼Œå¹¶ä¸” Hive è„±ç¦» Flutter æ”¾åœ¨ dart server ç«¯ä¹Ÿæ˜¯å¯ä»¥çš„è¿è¡Œã€‚

**åŒæ ·æ”¯æŒ key-value é«˜æ•ˆå­˜å‚¨çš„è¿˜æœ‰ [MMKV](https://github.com/Tencent/MMKV/tree/master/flutter ) ï¼ŒMMKV åŒæ ·æ˜¯åˆ©ç”¨   `dart:ffi`   æ”¯æŒäº† Flutter ï¼Œç›¸ä¿¡ Android å¼€å‘å¯¹å®ƒä¸ä¼šé™Œç”Ÿï¼Œ å¦å¤– [GetStorage](https://github.com/jonataslaw/get_storage) ä¹Ÿæ˜¯åŸºäºäºŒè¿›åˆ¶æ–‡ä»¶çš„é”®å€¼å¯¹å­˜å‚¨ï¼Œä¸è¿‡æ›´â€œä½èƒ½â€ä¸€äº›**ã€‚

# isar

**ä¹Ÿè®¸æ˜¯å› ä¸ºè§‰å¾— Hive ä¸å¤Ÿä¼˜ç§€ï¼Œæˆ–è€…æ˜¯ Hive ä¸æ”¯æŒé«˜çº§æŸ¥è¯¢ï¼Œæ‰€ä»¥ä½œè€…åç»­æ–°æ¨äº†æ–°çš„æ•°æ®åº“æ¡†æ¶ï¼š [isar](https://github.com/isar/isar/tree/main/packages/isar)** ï¼ŒåŒæ ·åŸºäº  `dart:ffi`  ï¼Œæ”¯æŒ Android ã€iOSã€Linuxã€MacOSã€Windowã€Web å¹³å°ã€‚

**å¦‚æœè¯´ Hive å¯ä»¥ç®€å•ä»£æ›¿ shared_preferences  ï¼Œé‚£ isar å°±æ›´åƒæ˜¯å¹³æ›¿ sqlite çš„æ•°æ®åº“**ï¼Œæ‰€ä»¥ isar æ›´åƒæ˜¯ä¸ºäº†è§£å†³ query é—®é¢˜è€Œåšçš„ Hive2.0 ï¼Œä¾‹å¦‚ï¼š

- æ”¯æŒå¤åˆå’Œå¤šç´¢å¼•ã€æŸ¥è¯¢ä¿®é¥°ç¬¦ã€JSONç­‰
- å¤š isolate æ”¯æŒ
- æ”¯æŒåä¸‡æ¡è®°å½•å­˜å‚¨åœ¨å•ä¸ª NoSQL æ•°æ®åº“

å’Œ Hive ç›¸æ¯”  isar åŠŸèƒ½æ›´ä¸°å¯Œï¼Œä¸å†åªæ˜¯å•çº¯çš„ key-value æ“ä½œï¼Œå¯ä»¥æ”¯æŒæ›´å¤æ‚çš„ filter ç­‰æŸ¥è¯¢æ¡ä»¶ï¼Œä»ä½¿ç”¨ä½“éªŒä¸Šæ›´ç¬¦åˆ  NoSQL çš„æ•°æ®åº“èƒ½åŠ›ã€‚

```dart
await isar.writeTxn(() async {
  final idsOfUnstarredContacts = await contacts.filter()
    .isStarredEqualTo(false)
    .idProperty()
    .findAll();

  contacts.deleteAll(idsOfUnstarredContacts);
});
```

åŒæ—¶ isar æä¾›äº†å¼ºå¤§çš„å¯è§†åŒ–å·¥å…· ï¼Œé€šè¿‡ Isar Inspector  ä¹Ÿæ˜¯åœ¨ä¸€å®šç¨‹åº¦è¡¥å…¨äº† Hive çš„ä¸è¶³ï¼Œä½¿ç”¨ Inspector åªéœ€è¦åœ¨ open æ—¶è®¾ç½® `inspector: true`  å°±å¯ä»¥çœ‹åˆ° ws åœ°å€è¿›è¡Œç»‘å®šè®¿é—®ã€‚ 

![](http://img.cdn.guoshuyu.cn/20220928_Z5/image24.gif)

å…¶å® isar å¦å¤–çš„å¥½å¤„å°±æ˜¯å®Œå…¨å¼€æºï¼Œä»æ„å»ºè„šæœ¬åˆ°é€»è¾‘ä»£ç éƒ½æ˜¯å¼€æºï¼Œä¾‹å¦‚å…¶ä¸­é€šè¿‡ [`Cargo.toml` ](https://github.com/isar/isar/blob/main/packages/isar_core_ffi/Cargo.toml) ç¼–æ’ `isar_core_ffi `ï¼Œç„¶ååœ¨ github action ä¼šåœ¨å‘å¸ƒæ—¶é€šè¿‡ shell è„šæœ¬æ‰§è¡Œå¦‚ä½•æ„å»º isar çš„åŠ¨æ€åº“ç­‰ã€‚

| ![](http://img.cdn.guoshuyu.cn/20220928_Z5/image25.png) | ![](http://img.cdn.guoshuyu.cn/20220928_Z5/image26.png) |
| ----------------------------------------------------------- | ----------------------------------------------------------- |

ä¾‹å¦‚ isar åœ¨ iOS ä¸Šæœ€é‡æ¥å…¥çš„æ˜¯ `isar.xcframework` ï¼Œåœ¨ Android ä¸Šæ˜¯ `isar.so`

| ![](http://img.cdn.guoshuyu.cn/20220928_Z5/image27.png) | ![](http://img.cdn.guoshuyu.cn/20220928_Z5/image28.png) |
| ----------------------------------------------------------- | ----------------------------------------------------------- |

ç›®å‰é›†æˆ isar åº“æœ¬èº«å¹¶ä¸æ˜¯å¾ˆå¤§ï¼Œä¾‹å¦‚åœ¨ Android ä¸Šé›†æˆä¹‹åï¼Œå¤§å°åªå¢åŠ äº†å¤§æ¦‚ 600 å¤šk ï¼Œæ‰€ä»¥ä½œä¸º Hive çš„å‡çº§ç‰ˆæœ¬ï¼Œisar ç¡®å®å€¼å¾—ä¸€è¯•ï¼Œã€‚

| ![](http://img.cdn.guoshuyu.cn/20220928_Z5/image29.png) | ![](http://img.cdn.guoshuyu.cn/20220928_Z5/image30.png) |
| ----------------------------------------------------------- | ----------------------------------------------------------- |

> ç›®å‰ç”±äº Isar Web ä¾èµ–äº IndexedDB ï¼Œæ‰€ä»¥å¯èƒ½å’Œå…¶ä»–å¹³å°ç›¸æ¯”è¾ƒå­˜åœ¨ä¸€å®šé™åˆ¶ã€‚

æœ€åæˆ‘ä»¬çœ‹æ¥è‡ª [guide-to-isar](https://itnext.io/a-minimalist-guide-to-isar-ee43c1e51a85) å’Œ [flutter-db-benchmarks](https://github.com/msxenon/flutter-db-benchmarks) çš„ä¸€ä»½æ•°æ®å¯¹æ¯”ï¼š

- å·¦è¾¹çš„æ•°æ®å¯¹æ¯”æä¾›äº†åœ¨ 50,000 æ¡æ•°æ®ä¸‹
  - æ’å…¥è€—æ—¶ isar < ObjectBox < Realm
  - åˆ é™¤è€—æ—¶ isar < Realm < ObjectBox
  - æ•°æ®åº“å¤§å°  isar < Realm < ObjectBox
  - æ¡ä»¶æŸ¥è¯¢  isar < Realm < ObjectBox
- å³è¾¹çš„æ•°æ®å¯¹æ¯”äº†åœ¨ 10,000 æ¡æ•°æ®ä¸‹
  - æ’å…¥è€—æ—¶ ObjectBox < isarAsync < isarSync < Hive
  - è¯»å–è€—æ—¶ Hive < ObjectBox < isarAsync < isarSync 
  - æ›´æ–°è€—æ—¶ ObjectBox < isarAsync < isarSync < Hive
  - åˆ é™¤è€—æ—¶ ObjectBox < isarAsync < isarSync < Hive

| ![](http://img.cdn.guoshuyu.cn/20220928_Z5/image31.png) | ![](http://img.cdn.guoshuyu.cn/20220928_Z5/image32.png) |
| ----------------------------------------------------------- | ----------------------------------------------------------- |

è¿™ä¸¤ä»½æ•°æ®è™½ç„¶çœ‹èµ·æ¥æœ‰çŸ›ç›¾ç‚¹ï¼Œä½†æ˜¯è¿™å…¶å®å’Œæµ‹è¯•ç¯å¢ƒæœ‰å…³ç³»ï¼š

- å·¦ä¾§çš„å›¾ç‰‡æ—¶åœ¨è¾ƒä¸ºæ­£å¸¸è®¾å¤‡ä¸Šçš„æµ‹è¯•ï¼Œå¯ä»¥è§†ä¸ºä¸€èˆ¬æƒ…å†µ

- å³ä¾§çš„æ•°æ®æµ‹è¯•çš„æ˜¯åœ¨ä½ç«¯è®¾å¤‡ä¸Šçš„è¡¨ç°ï¼Œå¯ä»¥è§†ä¸ºæœ€åçš„æƒ…å†µ

å°±åƒ  [#211](https://github.com/isar/isar/discussions/211) é‡Œè®¨è®ºçš„ï¼ŒåŒæ ·çš„åŸºå‡†æµ‹è¯•ï¼Œä½œè€…åœ¨å®ƒçš„è®¾å¤‡ä¸Šæµ‹è¯•åè€Œ isar è¡¨ç°æ›´å¥½ï¼Œè®¨è®ºçš„ç»“è®ºä¸Šçœ‹ä¹Ÿæ˜¯ï¼Œ**é™¤äº†é€Ÿåº¦ä¹‹å¤–ï¼Œåœ¨æ˜¯å¦å¯¼è‡´ UI å¡é¡¿ä¸Š isar çš„è¡¨ç°ä¹Ÿæ›´å¥½ï¼Œæ‰€ä»¥åŸºå‡†æµ‹è¯•çš„è¦†ç›–èŒƒå›´ä¹Ÿæ˜¯ä¸€ç§è€ƒé‡**ã€‚

![](http://img.cdn.guoshuyu.cn/20220928_Z5/image33.png)





# æœ€å

æœ€åï¼Œæœ¬ç¯‡ä»‹ç»äº†  [shared_preferences](https://github.com/flutter/plugins/tree/main/packages/shared_preferences)  ã€  [sqlite3](https://github.com/simolus3/sqlite3.dart/tree/master/sqlite3) ã€  [Drift](https://github.com/simolus3/drift) ã€ [realm](https://github.com/realm/realm-dart) ã€ [ObjectBox ](https://github.com/objectbox/objectbox-dart) ã€ [Hive ](https://github.com/hivedb/hive/tree/master/hive) å’Œ  [isar](https://github.com/isar/isar/tree/main/packages/isar)  ç­‰æ•°æ®å­˜å‚¨æ¡†æ¶ï¼Œç®€ç•¥å¸¦è¿‡çš„è¿˜æœ‰ [sqlcool]([Homepage](https://github.com/synw/sqlcool)) ã€ [floor](https://github.com/vitusortner/floor) ã€ [MMKV](https://github.com/Tencent/MMKV/tree/master/flutter )  å’Œ  [GetStorage](https://github.com/jonataslaw/get_storage)  ç­‰ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œ**è¿™ä»½æ•°æ®ä¹Ÿä¾§é¢ä½“ç°äº†ç›®å‰ Flutter ç”Ÿæ€çš„å¥å…¨ï¼Œè‡³å°‘åœ¨æ•°æ®å­˜å‚¨æ¡†æ¶ä¸Šå°±å¯ä»¥è®©äººäº§ç”Ÿâ€œé€‰æ‹©å›°éš¾ç—‡â€** ã€‚

å¦‚æœä½ è¿˜æœ‰ä»€ä¹ˆå…³äº Flutter å·¥ç¨‹æˆ–è€…æ¡†æ¶çš„ç–‘é—®ï¼Œæ¬¢è¿ç•™è¨€è¯„è®ºï¼Œè¿™ä¸ªç³»åˆ—æ˜¯å¦æ›´æ–°å°±å–å†³äºæ˜¯å¦è¿˜æœ‰æ–°çš„ç´ æï½